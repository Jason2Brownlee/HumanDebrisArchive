<html>
<head><script type="text/javascript" src="/_static/js/bundle-playback.js?v=1WaXNDFE" charset="utf-8"></script>
<script type="text/javascript" src="/_static/js/wombat.js?v=txqj7nKC" charset="utf-8"></script>
<script type="text/javascript">
  __wm.init("https://web.archive.org/web");
  __wm.wombat("http://ai-depot.com:80/FiniteStateMachines/FSM-Practical.html","20020918112346","https://web.archive.org/","web","/_static/",
	      "1032348226");
</script>
<link rel="stylesheet" type="text/css" href="/_static/css/banner-styles.css?v=S1zqJCYt" />
<link rel="stylesheet" type="text/css" href="/_static/css/iconochive.css?v=qtvMKcIJ" />
<!-- End Wayback Rewrite JS Include -->


<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<meta name="Author" content="Alex Champandard">

<link href="https://web.archive.org/web/20020918112346cs_/http://ai-depot.com/Style/Article.css" rel="stylesheet" type="text/css">

<title>Practical Analysis</title>

</head>

<body>


<div class="main">

<table border="0" cellpadding="0" cellspacing="0" class="head">

<tr> 
	<td class="left">
		<a href="https://web.archive.org/web/20020918112346/http://ai-depot.com/"><img src="/web/20020918112346im_/http://ai-depot.com/Images/Logo-title.jpeg" alt="Artificial Intelligence Depot"></a>
		<div>
		Visiting guest. Why not <a href="https://web.archive.org/web/20020918112346/http://ai-depot.com/Messages/Account.html">sign in</a>?		</div>
 
	</td>
	<td>
		<table border="0" cellpadding="0" cellspacing="0" style="height: 128px;">
			<tr><td class="rtop">News, knowledge and discussion for the AI enthusiast.</td></tr>
			<tr><td class="rbot">
			<table cellpadding="0" cellspacing="0" border="0">
			<tr class="r">
							<td class="n" style="padding-left: 1ex;"><a href="/web/20020918112346/http://ai-depot.com/Features/">FEATURES</a></td>
								<td class="p" height="21"><img src="/web/20020918112346im_/http://ai-depot.com/Images/Pixel.gif" alt="" width="27" height="1"></td>
								<td class="n"><a href="/web/20020918112346/http://ai-depot.com/Messages/">COMMUNITY</a></td>
								<td class="p" height="21"><img src="/web/20020918112346im_/http://ai-depot.com/Images/Pixel.gif" alt="" width="27" height="1"></td>
								<td class="n"><a href="/web/20020918112346/http://ai-depot.com/Knowledge.html">KNOWLEDGE</a></td>
								<td class="p" height="21"><img src="/web/20020918112346im_/http://ai-depot.com/Images/Pixel.gif" alt="" width="27" height="1"></td>
								<td class="n"><a href="/web/20020918112346/http://ai-depot.com/Search/">SEARCH</a></td>
								<td style="background-color: #999961; background-image: url(&quot;/web/20020918112346im_/http://ai-depot.com/Images/Slash-line.png&quot;); width: 50%;">&nbsp;</td>
			</tr>
			<tr>
				<td colspan="8" class="f">
					<table border="0" cellpadding="0" cellspacing="0">
					<tr><td class="d">
						<a href="https://web.archive.org/web/20020918112346/http://ai-depot.com/Contest">Get Creative: AI Article Writing Contest</a>
						<div>Fancy the chance of getting developer focus, improving your research skills, sharing your artificial intelligence ideas, obtaining expert feedback, getting published online AND winning a prize?<br><span>Enter the <a href="https://web.archive.org/web/20020918112346/http://ai-depot.com/Contest/">AI Article Writing Contest!</a></span></div>
					</td><td class="i">
						<a href="https://web.archive.org/web/20020918112346/http://ai-depot.com/Contest"><img src="https://web.archive.org/web/20020918112346im_/http://ai-depot.com/Images/Adlets/Writing.png" alt=""></a>
					</td></tr>
					</table>
				</td>
			</tr>
			</table>
			</td></tr>
		</table>
	</td></tr>
</table>


<table cellspacing="0" cellpadding="0" border="0" class="menu">

<tr><td style="width: 129px; vertical-align: top;">

	<table cellspacing="0" cellpadding="0" border="0" style="width: 100%; background-color: #404040; border-width: 1px 1px 1px 0; border-color: #c0c0c0; border-style: solid;">
	<tr><td class="c">FEATURES</td></tr>
	<tr><td class="s">
		<a href="/web/20020918112346/http://ai-depot.com/Features/News.html">news</a> +<br>
		<a href="/web/20020918112346/http://ai-depot.com/Features/Essays.html">essays</a> +<br>
		<a href="/web/20020918112346/http://ai-depot.com/Features/Tutorials.html">tutorials</a> +<br>
		<a href="/web/20020918112346/http://ai-depot.com/Features/Reviews.html">reviews</a> +<br>
		<a href="/web/20020918112346/http://ai-depot.com/Features/Information.html">information</a> +<br>
	</td></tr>

	<tr><td class="c">COMMUNITY</td></tr>
	<tr><td class="s">
		<a href="/web/20020918112346/http://ai-depot.com/Messages/">message store</a> +<br>
		<a href="/web/20020918112346/http://ai-depot.com/Messages/Recent.html">recent activity</a> +<br>
		<a href="https://web.archive.org/web/20020918112346/http://foundry.ai-depot.com/">project foundry</a> +<br>
		<a href="/web/20020918112346/http://ai-depot.com/Community/Contribute.html">contribute</a> +<br>
		<a href="/web/20020918112346/http://ai-depot.com/Community/Hosted.html">hosted sites</a> +<br>
	</td></tr>

	<tr><td class="c">KNOWLEDGE</td></tr>
	<tr><td class="s">
		<a style="font-size: 7pt; " href="/web/20020918112346/http://ai-depot.com/Intro.html">artificial intelligence</a> +<br>
		<a href="https://web.archive.org/web/20020918112346/http://neuralnetworks.ai-depot.com/">neural networks</a> +<br>
		<a href="https://web.archive.org/web/20020918112346/http://geneticalgorithms.ai-depot.com/">genetic algorithms</a> +<br>
		<a style="font-size: 7pt; " href="https://web.archive.org/web/20020918112346/http://reinforcementlearning.ai-depot.com/">reinforcement learning</a> +<br>
	</td></tr>

	<tr><td class="c">THIS SITE</td></tr>
	<tr><td class="s">
		<a href="/web/20020918112346/http://ai-depot.com/Site/Welcome.html">welcome</a> +<br>
		<a href="/web/20020918112346/http://ai-depot.com/Search/">site search</a> +<br>
		<a href="/web/20020918112346/http://ai-depot.com/Site/Link.html">link to us</a> +<br>
	</td></tr>

	<tr><td style="font-size: 16px;">&nbsp;</td></tr>

	</table>

	<table style="background-color: #000000; width: 100%;">
	<tr><td>&nbsp;</td></tr>
	</table>

</td>

<td class="content">

<h1>Practical Analysis</h1>

<div class="nav"> 
<div class="left">
Previous: <a href="FSM-Background.html">Background</a><br>
<a href="FSM.html"><img src="/web/20020918112346im_/http://ai-depot.com/Images/Nav-left.png" alt=""></a>
<a href="FSM-Background.html"><img src="/web/20020918112346im_/http://ai-depot.com/Images/Nav-left.png" alt=""></a>
<a href="FSM-Practical.html"><img src="/web/20020918112346im_/http://ai-depot.com/Images/Nav-middle.png" alt=""></a>
<a href="FSM-Framework.html"><img src="/web/20020918112346im_/http://ai-depot.com/Images/Nav-right.png" alt=""></a>
<a href="FSM-Conclusion.html"><img src="/web/20020918112346im_/http://ai-depot.com/Images/Nav-right.png" alt=""></a>
</div>
<div class="right">
<span style="color: #c0c080; font-style: italic;">Finite State Machines (FSM)</span><br>
<span style="color: #808080;">Jason Brownlee</span>
</div></div>

<div class="page">

<p><i>A Practical Analysis of FSM within the domain of first-person shooter (FPS) computer game</i></p>

<p><span class="f">T</span>he intent of this section is to use a computer game to illustrate the conceptual workings of a FSM based on a practical rather than theoretical implementation. I will not attempt to provide insight into how the computer game works or even many specifics (code) of the implementation in the computer game. The FSMs discussed in this section have been coded, tested and released in production code, providing real world examples, within the domain of a first person computer game.</p>

<p><span class="f">T</span>his section will provide two examples of finite state machines from a first-person computer game created by id Software <sup><a href="#[6]">[6]</a></sup> called Quake <sup><a href="#[7]">[7]</a></sup>. The reason I chose this product as the basis for the analysis was due the fact that game engine code has been released publicly under the GNU General Public License (GPL) <sup><a href="#[8]">[8]</a></sup> <sup><a href="#[9]">[9]</a></sup>. The other reason for this decision was because at the time the game was released, it was cutting-edge and had its code licensed by other company’s that produced further highly-popular titles such as Unreal and Half-Life, thus proving the success of the original product.</p>

<p><span class="f">W</span>e are going to start with the analysis of something very simple. We will see that even through mapping the states of a simple projectile like a rocket, we can learn more about the very nature of FSM. I make no claim at being an expert in regard to Quake game code (this was my first excursion through it), so forgive me if my interpretations based on code do not directly map.</p>

<p><span class="f">A</span> rocket in Quake is a projectile fired from the Rocket Launcher weapon/item which may be possessed and operated by a human player.</p>

<p class="desc"><u>Figure 2.1</u>: State transition representation of a rocket projectile from Quake.</p>
<img style="float: none;" src="/web/20020918112346im_/http://ai-depot.com/FiniteStateMachines/FSM4.png">

<p><span class="f">R</span>ather than restricting myself and confusing the reader by using a formal notation as mentioned in the first section of this document, the finite state machine has been represented using an approach very similar to a State Transition Diagram. The blue boxes are the states, the orange the triggers and the arrows are the state transitions. The black boxes show the entry point and exit points of the system.</p>

<p><span class="f">T</span>he diagram shows the full life cycle of the rocket projectile within the game. It is interesting to note that the projectile is spawned into existence as the product of an action of another FSM, namely that of the "rocket launcher" from its "fire" action. When the projectile instance dies it is removed from the game, and no longer exists.</p>

<p><span class="f">T</span>his representation is a subjective interpretation of code. Another valid representation may break the "touch state" down further into touch and explode states. Personally I view explode as an action or effect performed by the rocket object in its touch state.</p>

<p><span class="f">A</span>nother interesting note is that when the projectile is in its touch state, one of its effectors is to attempt to damage whatever it is touching. If it succeeds in damaging another entity in the game world, the damage action becomes an input which can trigger a state change of the effected entity into another state.</p>

<p><span class="f">Q</span>uake makes extensive use of FSMs as a control mechanism governing the entities that exist in the game world. This has been provided by an interesting framework which is tightly related to the way FSM work in the computer game. For further discussion of this framework, please see section three.</p>

<p><span class="f">L</span>et’s take a look at a slightly more advanced FSM from Quake. A Shambler is a big bad monster entity from the single player component of Quake. Its mission in life is to kill the player, once it is aware of the player.</p>

<p class="desc"><u>Figure 2.2</u>: State transition representation of a Shambler monster from Quake.</p>
<img style="float: none;" src="/web/20020918112346im_/http://ai-depot.com/FiniteStateMachines/FSM5.png">

<p><span class="f">L</span>ike the rocket projectile, this entity has an initial state (spawn state), and the system ends when the entity dies (die state). There are only four identified main states, but the Shambler is a good example that illustrates the ability to have a hierarchy of sub-states. Though the sub-states in this example could be considered actions of the "attack state", they are also sub-states because the monster can only perform one (or be in one) of them per execution of the attack state.</p>

<p><span class="f">W</span>hen in the attack state, the Shambler instance makes a decision based on evaluated inputs whether to perform a melee (close up) or missile (long distance) style of attack on its goal. Upon selecting a melee type attack (melee attack state), the inputs are further evaluated, along with a random number to select a melee attack type (smash with both arms, smash with left arm or smash with right arm).</p>

<p><span class="f">T</span>he use of a random number in the selection of a melee attack sub-state adds a level of unpredictability to the selection. Each level in the hierarchy could be considered a sub-finite state machine of the greater monster entity, and in this case the sub-FSM of the melee attack state could be classified as non-deterministic.</p>

<p><span class="f">I</span>t is important to understand the use of layered or hierarchical finite state machines, because when used as seen in the Shambler monster it allows far more complex behaviors. This technique is heavily used in Quake by all entities in the game world. Because of this, a lot of code has been abstracted to be easily be used in many different places, actions such as movement, visibility assessments and so on.</p>

<p><span class="f">T</span>his example has been greatly simplified to make it more readable. An example of this is in the triggers which cause the state transitions. When a state transition occurs from "Attack State" to "Idle State", the trigger has been simplified as "lost goal". It is true that the transition occurs due to the loss of the goal entity, but a goal can be lost by the Shambler in a number of ways evaluated at different points in the code, including time-out and damage from another entity.</p>

<p><span class="f">A</span>nother key point regarding this example is the use of goals as the primary motivator for the FSM. This technique has not been discussed, though it is an example of the power and flexibility of FSM as a control technique. As well as possessing a hierarchy of finite state machines, the high level FSM is driven by the entities desire to locate a goal, and attack its goal. The goal is usually a human player or even another monster in the game world. It should be noted that whilst the monster is in its idle state, as well as just standing around it is also looking for goals to walk to (for roaming).</p>

<p><span class="f">Q</span>uake did not provide the best single player experience imaginable, though it was and still is fun and addictive, both key attributes of the games success. It is good example, and a good learning tool that can show the power of both very simple finite state machines such as the rocket projectile, and slightly more complex FSM made up of a hierarchy of FSM and motivated by goals, such as the Shambler monster</p>

<p class="thread">Remember you can visit the <i>Message Store</i> to <a href="https://web.archive.org/web/20020918112346/http://artificialintelligence.ai-depot.com/ArtificialIntelligence/576.html">discuss this tutorial</a>.  
There are already <b>6</b> replies in the thread, why not join in?
</p>

<div class="nav" style="text-align: right;">
<a href="FSM.html"><img src="/web/20020918112346im_/http://ai-depot.com/Images/Nav-left.png" alt=""></a>
<a href="FSM-Background.html"><img src="/web/20020918112346im_/http://ai-depot.com/Images/Nav-left.png" alt=""></a>
<a href="FSM-Practical.html"><img src="/web/20020918112346im_/http://ai-depot.com/Images/Nav-middle.png" alt=""></a>
<a href="FSM-Framework.html"><img src="/web/20020918112346im_/http://ai-depot.com/Images/Nav-right.png" alt=""></a>
<a href="FSM-Conclusion.html"><img src="/web/20020918112346im_/http://ai-depot.com/Images/Nav-right.png" alt=""></a><br>Next: <a href="FSM-Framework.html">A Finite State Machine Framework</a>
</div>

<p class="brown">Back to the <a href="https://web.archive.org/web/20020918112346/http://ai-depot.com/">Artificial Intelligence Depot</a>.<p>
</div>
 

</td></tr>
</table>


</div>

<div class="footer">
<a href="https://web.archive.org/web/20020918112346/http://ai-depot.com/" title="Artificial Intelligence Depot"><img src="/web/20020918112346im_/http://ai-depot.com/Images/Logo-footer.png" alt="Artificial Intelligence" title="Artificial Intelligence" style="margin: 12px; border: 0;"></a><br>

This page and its content are &copy; Copyright 2001-2002, Artificial Intelligence Depot.  All rights reserved.<br>
Site owned and maintained by Alex J. Champandard.
</div>

</body>

</html>
<!--
     FILE ARCHIVED ON 11:23:46 Sep 18, 2002 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 20:09:25 Jul 15, 2023.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
-->
<!--
playback timings (ms):
  captures_list: 94.32
  exclusion.robots: 0.18
  exclusion.robots.policy: 0.17
  cdx.remote: 0.061
  esindex: 0.008
  LoadShardBlock: 70.014 (3)
  PetaboxLoader3.datanode: 108.865 (4)
  load_resource: 325.095
  PetaboxLoader3.resolve: 258.06
-->